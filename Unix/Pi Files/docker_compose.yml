version: '3.4'
services:
  booksonic:
    image: ghcr.io/linuxserver/booksonic
    hostname: ${DOCKERHOSTNAME}
    ports:
      - ${BOOKSONIC_PORT_4040}:4040
    container_name: booksonic
    environment:
      - CONTEXT_PATH=${BOOKSONIC_CONTEXT_PATH}
      - PGID=${PGID}
      - PUID=${PUID}
      - TZ=${TZ}
    logging:
      driver: json-file
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    restart: unless-stopped
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKERCONFDIR}/booksonic:/config
      - ${DOCKERSTORAGEDIR}:/storage
  calibreweb:
    image: ghcr.io/linuxserver/calibre-web
    hostname: ${DOCKERHOSTNAME}
    ports:
      - ${CALIBREWEB_PORT_8083}:8083
    container_name: calibreweb
    environment:
      - PGID=${PGID}
      - PUID=${PUID}
      - TZ=${TZ}
    logging:
      driver: json-file
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    restart: unless-stopped
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKERCONFDIR}/calibreweb:/config
      - ${DOCKERSTORAGEDIR}:/storage
  heimdall:
    image: ghcr.io/linuxserver/heimdall
    hostname: ${DOCKERHOSTNAME}
    ports:
      - ${HEIMDALL_PORT_443}:443
      - ${HEIMDALL_PORT_80}:80
    container_name: heimdall
    environment:
      - PGID=${PGID}
      - PUID=${PUID}
      - TZ=${TZ}
    logging:
      driver: json-file
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    restart: unless-stopped
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKERCONFDIR}/heimdall:/config
      - ${DOCKERSTORAGEDIR}:/storage
  plex:
    image: ghcr.io/linuxserver/plex:bionic
    hostname: ${DOCKERHOSTNAME}
    ports:
      - ${PLEX_PORT_1900}:1900/udp
      - ${PLEX_PORT_3005}:3005
      - ${PLEX_PORT_32400}:32400
      - ${PLEX_PORT_32410}:32410/udp
      - ${PLEX_PORT_32412}:32412/udp
      - ${PLEX_PORT_32413}:32413/udp
      - ${PLEX_PORT_32414}:32414/udp
      - ${PLEX_PORT_32469}:32469
      - ${PLEX_PORT_33400}:33400
      - ${PLEX_PORT_8324}:8324
    container_name: plex
    environment:
      - PGID=${PGID}
      - PLEX_CLAIM=${PLEX_CLAIM}
      - PUID=${PUID}
      - TZ=${TZ}
      - VERSION=${PLEX_VERSION}
    logging:
      driver: json-file
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    restart: unless-stopped
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKERCONFDIR}/plex:/config
      - ${DOCKERSTORAGEDIR}:/storage
  portainer:
    image: portainer/portainer-ce
    hostname: ${DOCKERHOSTNAME}
    ports:
      - ${PORTAINER_PORT_9000}:9000
    command: -H unix:///var/run/docker.sock
    container_name: portainer
    environment:
      - TZ=${TZ}
    logging:
      driver: json-file
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    restart: unless-stopped
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /var/run/docker.sock:/var/run/docker.sock
      - ${DOCKERCONFDIR}/portainer:/data
      - ${DOCKERSTORAGEDIR}:/storage
  transmission:
    image: ghcr.io/linuxserver/transmission
    hostname: ${DOCKERHOSTNAME}
    ports:
      - ${TRANSMISSION_PORT_51413}:51413
      - ${TRANSMISSION_PORT_51413}:51413/udp
      - ${TRANSMISSION_PORT_6881}:6881
      - ${TRANSMISSION_PORT_6881}:6881/udp
      - ${TRANSMISSION_PORT_9091}:9091
    container_name: transmission
    environment:
      - PGID=${PGID}
      - PUID=${PUID}
      - TZ=${TZ}
    logging:
      driver: json-file
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    restart: unless-stopped
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKERCONFDIR}/transmission:/config
      - ${DOCKERSTORAGEDIR}:/storage
  watchtower:
    image: containrrr/watchtower:armhf-latest
    hostname: ${DOCKERHOSTNAME}
    container_name: watchtower
    environment:
      - REPO_PASS=${WATCHTOWER_REPO_PASS}
      - REPO_USER=${WATCHTOWER_REPO_USER}
      - TZ=${TZ}
      - WATCHTOWER_CLEANUP=${WATCHTOWER_CLEANUP}
      - WATCHTOWER_INCLUDE_STOPPED=${WATCHTOWER_INCLUDE_STOPPED}
      - WATCHTOWER_MONITOR_ONLY=${WATCHTOWER_MONITOR_ONLY}
      - WATCHTOWER_NOTIFICATION_TEMPLATE=${WATCHTOWER_NOTIFICATION_TEMPLATE}
      - WATCHTOWER_NOTIFICATION_URL=${WATCHTOWER_NOTIFICATION_URL}
      - WATCHTOWER_NOTIFICATIONS_LEVEL=${WATCHTOWER_NOTIFICATIONS_LEVEL}
      - WATCHTOWER_NOTIFICATIONS=${WATCHTOWER_NOTIFICATIONS}
      - WATCHTOWER_SCHEDULE=${WATCHTOWER_SCHEDULE}
      - WATCHTOWER_TIMEOUT=${WATCHTOWER_TIMEOUT}
    logging:
      driver: json-file
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    restart: unless-stopped
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /var/run/docker.sock:/var/run/docker.sock
      - ${DOCKERSTORAGEDIR}:/storage
